{"version":3,"sources":["typing.ts","covering.ts","drawing.ts","littlebird.ts","main.ts"],"names":[],"mappings":";;;;;;AIAA,MAAA,QAAA,GAAA,OAAA,CAAA,UAAA,CAAA;AHAA,ACAA,ACAA,AHAA,MCAA,ACAA,ACAA,AHAa,MAAb,CAAmB,CCAnB,ACAA,ACAA,GFAA,ACAA,ACAA,OFAA,ACAA,ACAA,CFAA,ACAA,ACAA,UFAA,ACAA,ACAA,CFAA,ACAA,ACAA;AFGA,AGFA,AJII,EAAA,IIJJ,OJII,CAAY,CAAZ,EAAuB,CIJ3B,AJII,EAAgC,CIJpC,OAAA,CAAA,cAAA,CAAA;AFAA,ACAA,AHKQ,MELR,ACAA,GHKa,CAAL,GAAS,CAAT,CGLR,CDAA,ECAA,CDAA,MCAA,CDAA,ACAA,CDAA,UCAA,CAAA,CDAA,CAAA;AAKA,AEFA,AJGQ,MIHF,GJGO,CAAL,EIHI,CJGK,CAAT,CIHO,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAf;ADAA,AHIK,MGJC,KAAK,GAAG,IAAI,CAAC,IAAL,CAAU,CAAV,CAAd;ACEA,IAAI,MAAM,IAAI,IAAd,EAAoB;AHApB,AECA,ACAI,AJGA,EAAA,KAAK,CIHC,AJGA,CCJM,AECA,ECAH,EJGJ,CIHO,CJGO,KIHD,CAAC,IHDvB,CAAiC,KGCjB,CDAhB,ACAkC,CDAM,GCAxB,CHDhB,AGCI,EHDqD,AECzD,EAAyD,GFDzD,EAAuE,MAAvE,EAAwF;AAEpF,AECA,AHEI,QGFE,GFDG,ADGE,IGFE,AHEE,GGF4B,GHEhC,CAAW,KAAK,CAAL,GAAS,KAApB,EAA2B,KAAK,CAAL,ECHtC,CAA6C,ADGE,KAApC,CAAP,MCHJ,EAAiE;AAC7D,ACAR,ACCQ,ACDJ,AJGC,MIHG,GFAQ,AEAL,EHAI,EECE,ACDF,IAAX,EAAiB,CDA0B,CDA/C,CDA0B,ACAG,CDAF,SAAZ,CAAsB,CCArC,EAAiD,EDAP,CAAC,UCA3C,EAAuE,IDAlC,CAAuB,CCA5D,EAAwF,SDAnD,CAAtB,EAA4D,QAA5D,CAAqE,MAArE,CAAP;AACH,ACCD,ACAI,ACDA,IAAA,KFCG,CAAC,AEDE,CAAC,EFCJ,CCAO,CDAD,CEDT,GAAe,MAAM,CAAC,GFCnB,GCFoC,EDEZ,EED3B;AFGA,ACDA,ACDA,AJGJ,EAAA,EIHI,CJGD,CAAC,EEDI,EEFE,CAAC,CFEC,AFCT,CGFU,CHEK,CEDH,EEFX,GAAgB,MAAM,CAAC,CFEC,CAAC,CCJc,QCEvC,GFEwB,EAAe,cAAf,CAAxB;ADDJ,ACEI,ACDA,ACAA,AJEA,QCHE,ACEE,EEDE,CJEC,CGFC,CDCC,CDFD,CDGG,CEDC,CDFD,IAAI,ADGR,CAAW,GIFG,EJEE,CIFC,AJEN,CCHH,ACEU,CDFV,ACEW,CFCC,CIFC,GFChB,CDFD,ACEqB,CDFV,ADGW,CCHtB,ADGuB,CAA3B,CCHkB,AGCG,CHDjB,AGCiB,AJES,CCHzC,IDG8C,CAAL,GEDS,AEDtB,AJEsB,CEDC,AEDT,IAAI,CJEU,CAAC,CEDzC,AFCL,CEDP,AFCA,CEJ2B,CAK3B,EEH0C,CAAA,MAAJ,CAAW,CAAX,EAAc,CAAd,CAAd,EAAgC,IAAI,QAAA,CAAA,MAAJ,CAAW,MAAM,CAAC,KAAlB,EAAyB,MAAM,CAAC,MAAhC,CAAhC,CAAxB;AHAJ,AEJ2C,ACKvC,AJEH,GGPD,KFIM,AGCE,OAAO,CHDD,EGCI,CHDD,UAAU,CAAC,AGCV,CAAA,KHDS,EAAS,gBGClB,CAAwB,eAAxB,CAAd,EHDuB,CAA3B;AACA,ACGI,ACDJ,ACDI,QHDE,ACGE,ACDF,ACDE,SHDO,CCGG,EDHA,AEEA,CDCG,CEFC,CDCD,CAAC,CCDG,EFEE,CAAC,CEFC,EHDA,AEER,CFFS,CEEC,CDCV,GAAgB,AEFR,CHDA,AGCA,EHDS,CEEjB,EAAoB,EDCpB,CAAyB,IAAI,ACD7B,CDC8B,CCDD,ACDzB,CAAmB,IAAI,CDC3B,CAArB,GDC8C,CAAiB,EEFf,CAAA,GFEF,EAAzB,CAAjB,AEFwC,CAAW,EHD1B,CAA7B,AGC4C,EAAgB,GAAhB,CAAnB,EAAyC,EAAzC,CAArB;AHAJ,ACGI,ACAJ,ACDI,AJCJ,EAAA,EIDI,IHFE,AEGA,EDAI,AFAF,CIDG,AJCF,CIDG,GAAD,EAAM,AJCT,ECHS,ADGM,GCHH,IAAI,CCGG,ACAF,GDAK,ACAF,CCDjB,CAAP,GFC+B,CAAC,GCAR,CAAA,CFHR,CAAoB,QAApB,EAA8B,ACGpB,ACAF,CDAyB,ACAZ,KDAiB,CAAC,EDHvC,CAApB,KEG4B,EAA6B,IDAJ,ACAQ,CDAa,OCAb,CAAA,EDAR,EAAiC,CCA7B,CAAU,GDAd,CCAkB,CDAzC,CAA1B,MCAmE,CAAA,MAAJ,CAAW,CAAX,EAAc,EAAd,CAAV,EAA6B,IAAI,QAAA,CAAA,MAAJ,CAAW,IAAI,KAAf,EAAsB,CAAtB,CAA7B,CAA7B,EAAqF,MAArF,CAA5B;AFDA,ACEI,ACAJ,ACAI,AJAA,IEAA,AEAA,EHFA,ECEI,ACAF,GDAK,AFAA,IAAI,GCFC,GAAkB,ADEvB,CCFwB,ADEb,EEAE,CDFc,ACEb,ECAA,AHAE,CAAL,CEAE,AEAK,CDAD,ACAE,CFAC,AFAA,IEAI,CDFD,CAAlC,ADEqC,CIAR,AJAS,CGAV,AHAjB,CGAiB,ACAY,CJAC,EEAN,AEAN,CFAM,CEAU,CJAC,CAAL,GAAS,EGAtB,ACAC,CDAY,CCAa,EJAE,CAAC,CEA1B,AFApB,CEAuC,AFA9C,QGAwB,CCAC,CDA4B,CCAa,GDAT,GDA9B,EAAsC,CAAtC,CAAP,CAApB,ACAyD,CAAA,GCAwB,CAAC,CDA7B,CAAU,IAAI,ACAD,EAAzC,CAAzB,KDAmE,CAAA,MAAJ,CAAW,CAAC,KAAZ,EAAmB,CAAnB,CAAV,EAAiC,IAAI,QAAA,CAAA,MAAJ,CAAW,IAAI,KAAf,EAAsB,CAAtB,CAAjC,CAA7B,EAAyF,MAAzF,CAA5B;ADEI,ACAJ,ACDI,AJAH,IIAG,EDCA,EDAI,KAAK,ACAF,GDAK,ACAU,EAA1B,GDAI,KEDsB,CAAC,QAAD,EAAW,GAAX,EAAgB,OAAhB,EAAyB,cAAzB,CAAtB;AHFJ,AGGC,OHHI,MAAM,eAAX,IAA8B,oBAAoB,CAAC,WAAD,EAAc,mCAAd,EAAmD,IAAnD,CAAlD,EAA4G;AACxG,ACGA,ACCJ,ACDH,AJAG,EAAA,ECHI,EDGA,CGCC,CDDG,CFAJ,EGCK,CAAC,CDDN,EAAW,ACCF,CFJG,AEIhB,EAAgB,CFJG,AEIF,GAAG,CAApB,EAAuB,CAAC,EAAxB,EAA4B,CFJG,CAAC,MAAb,CAAoB,CAAC,GAAG,eAAJ,CAApB,CAAf;AACH,ACGO,ACCJ,AHDA,MEAI,ECCA,GHDG,IAAI,GGCG,CDDG,CAAC,CCCD,AHDV,CAAW,CEAD,EAAM,EFAA,CAAhB,CEAoB,CAAC,ACCX,AHDS,CGCT,IHDc,CAAxB,CAAP,EGCiB,CAAS,CDDT,CAAb,iBCCa,EAA8B,OAAO,CAAC,YAAY,CAAC,CAAD,CAAb,CAArC,CAAjB;ADAC,ACCD,ACAR,AJDK,IGCG,KCAC,KDAS,GAAG,SAAA,CAAA,OCArB,CACI,QADJ,EACwB,GADxB,EACuD,CDDlC,CACT,KCDZ,EAC0E,GDDrD,EAER,CAAD,IAAO,IAAI,ACFvB,EAC0G,MDCnF,CAAA,KCFvB,EAC8H,ODC3G,CACH,IAAI,QAAA,CAAA,MAAJ,CAAW,CAAC,CAAC,WAAF,CAAc,CAAd,GAAkB,CAAC,GAAG,KAAJ,GAAY,CAAC,CAAC,OAA3C,EAAoD,CAAC,CAAC,WAAF,CAAc,CAAd,GAAkB,IAAI,CAAJ,GAAQ,CAAC,CAAC,OAAhF,CADG,EACuF,CAAC,CAAC,OADzF,CAFE,CAAb;AFJJ,AEUI,ACFJ,EAAA,EDEI,GFVC,GGQG,CDEG,ACFF,CDEG,CFVD,GEUP,CAAa,UAAb,ACFJ,CHRA,AGQ0B,IHRI,KGQ9B,EAAsC,KAAD,IAAU,IHRG,CAAC,WAAD,EAAc,mCAAd,EAAmD,KAAnD,CAAlD,EAA6G;AACzG,ACIA,ACOA,ACFA,AJLJ,EAAA,ECJI,CDID,CAAC,CAAD,CGOK,ACFA,CFLC,AFAI,MEAE,CDJC,EEWE,ACFA,CHTC,EEWE,ACFA,EAAjB,IFLA,GCOiB,CFXU,ACIA,ACOV,CFXW,MAAb,CAAoB,AEWlB,CFXmB,AEWV,CDPC,CAAA,CDJY,eAAJ,ACIR,CDJZ,ACI6B,ACO3B,CFXjB,CEW+C,EDPC,CAAC,ICOK,CAAC,MDP5B,EAAmC,ICOK,CDPxC,ACOyC,CAAD,CDPE,ACOf,CAArC,CAAjB,IDP2B,CAA3B,EAA8E;ADHjF,ACIO,ACOJ,AHPA,IGOA,OHPO,CEAG,CAAC,CCOD,EDPI,AFAF,CGOC,AHPN,GAAS,CEAG,AFAF,CEAG,AFAF,CAAX,GGOM,AHPS,CGOT,IHPc,CAAL,GAAS,CAAC,CAAC,CEAnB,AFAd,CEAqC,YAAvB,ACOD,CDPT,ACQA,UADS,EAER,CAAD,IAAO,IAAI,QAAA,CAAA,cAAJ,CAAmB,IAAI,QAAA,CAAA,MAAJ,CAAW,CAAC,CAAC,WAAF,CAAc,CAAd,GAAkB,CAAC,GAAG,CAAJ,GAAQ,KAAR,GAAgB,CAAC,CAAC,OAA/C,EAAwD,CAAC,CAAC,WAAF,CAAc,CAAtE,CAAnB,EAA6F,CAAC,CAAC,OAA/F,CAFE,CAAb;ADNI,ACUJ,ACLA,AJLH,IGUG,EDVI,KCUG,CAAC,ACLA,IDKR,CAAa,ACLA,CAAC,CFLG,CAAC,EEKlB,EFLsB,CAAC,ECUvB,EDViB,EAAY,IAAI,QAAA,CAAA,cAAJ,CAAmB,CAAnB,EAAsB,CAAtB,CAAZ,CAAb,CAAmD,GAAnD;ADHR,ACIK,ACUJ,ACLO,SHTD,EGSM,OAAL,GHTR;AAEH,ACGI,AEKW,AJLZ,EAAA,CEnBA,GFmBI,EIKQ,CJLR,GIKY,CAAC,cAAD,EAAiB,YAAjB,EAA+B,IAA/B,CAAJ;AFHf,ACSG,ACLY,AJLR,SGUG,EHVI,IAAI,CAAC,EGUT,CAAA,CHVI,CAAU,KAAK,CAAL,GAAS,EGUvB,CAAc,CAAC,CHVa,CAAd,GAAkB,IGUjB,CAAA,AHVsB,CAAL,GAAS,KAAK,CAA1C,CAAP,GGUkB,CAAe,MAAf,CAAD,EAAyB,GAAG,OAA5B,CAAd,CAAP;AFnCJ,AEqCC,AHXI,OC1BL,CAAA,gBAAA,GAAA,gBAAA;ACGA,AE4BY,OF5BZ,CAAA,GE4BiB,OAAL,EF5BZ,GAAA,YAAA;ADqBA,AEvBA,AC+BgB,AJJZ,EAAA,KG3BJ,AH2BS,CG3BT,AC+BgB,CHRP,CDIA,EIIW,CAAC,YHRrB,CAA0B,CGQN,EAAiB,ED/BrC,EFuBA,CEvBA,CFuB2C,KAA3C,CGQoB,CHRsE,CGQvC,IAA/B,CAAJ,SD/BhB;AFuB0F,ACK1F,ACWA,ACPgB,AJJR,MCLkE,AEgBpE,GDXU,EFAD,ICL2E,ADKvE,EEAnB,CAAyB,ECWL,CHXL,CEAf,AFA0B,CGWG,CDXY,EFAX,CAAC,KAAL,CEA1B,AFAqC,EEAsB,GFAjB,CAAhB,CAAX,EAA+B,IAAI,CAAC,KAAL,CAAW,KAAK,CAAhB,CAA/B,CAAP,yBCL8E,IAAI;AACtF,ACMA,ACUA,AHXC,EGWD,IFhBI,AEgBA,CFhBC,CEgBC,CDVC,CDNC,ACMA,GAAD,EAAM,EDNE,CAAC,IAAR,AEgBQ,EFhBhB,CEgBM,EAAuC,EDVtC,KAAwB;ADL/B,ACMI,ACUA,ACRI,IFFJ,GAAG,CDND,ACME,ACUA,CAAC,CFhBD,CGQK,CDQD,CFhBD,ICMP,ACUa,GAAG,CAAhB,CFhBgB,CGQZ,EHRe,CAAH,GAAO,CAAC,CAA5B;AACA,ACMI,ACWA,ACTQ,AJzCG,ECiCf,CAAC,CAAC,ACME,ACWA,CFjBJ,EEiBO,CDXC,ACWA,ACTI,CHRL,ACME,EDNT,CCMQ,EAAM,ACWV,CAAW,CAAX,EAAc,CAAd,GCTsB,CAAC,KFFnB,CAAJ,KEEQ,CAA2B,CAA3B,IAAgC,UAAhC;ADUR,ACTQ,IDSR,GAAG,CAAC,IAAJ;AFjBJ,ACMI,AFxCR,OAAA,CEwCY,AFxCZ,CCkCW,KAAK,ADlChB,CCkCiB,CAAD,CAAZ,ACMI,AFxCR,ECkCqB,ACME,IFxCvB;ACmCQ,ACMI,ACWJ,ACTI,IHRJ,CAAC,CAAC,ACME,CDNJ,ECMO,ACWF,CDXG,CDND,AGQE,EHRT,AEiBS,CAAC,GAAG,CAAb,CDXI,CCWY,CAAC,CDXG,AEEhB,EDSgB,CAApB,EAAuB,CAAC,EAAxB,CDXI,CCWwB;AFhB/B,ACMI,ACWG,ACTI,AJJhB,MGaY,AHbC,EIIG,CDSD,CAAC,CHbhB,CAAkB,IGaN,CAAW,CAAX,EAAc,CAAd,CCTkB,CAAC,WAAf,CAA2B,CAA3B,IAAgC,UAAhC;ADUJ,ACTI,AJDZ,EAAA,IGUQ,GAAG,CAAC,GHVZ,CAAY,CAAZ,CGUQ,CAAW,AHVI,CAAvB,EAAgC,GGUP,CAAjB,EAAoB,OAAO,CAA3B;AFjBR,ACMI,ACYI,AHVJ,IEFA,ECYI,CDZD,CAAC,CDND,AEkBI,AHVF,CGUG,AHVR,EEFA,CDNO,ADQE,CAAT,EGUI,CAAW,IFlBR,AEkBY,CFlBZ,AEkBa,EAAL,GAAU,CFlBtB,AEkBC,CFlBU,CAAC,CAAC,CAAF,GAAM,EAAjB,EAAqB,CAAC,CAAC,CAAvB,CAAP;AACH,ACMI,ACYI,ACVG,AJAJ,GETJ,MFSS,CAAL,CIAS,EJAA,CAAT,MIAI;AFAX,AECe,AJAX,QIAW,cAAc,CAAC,WAAf,CAA2B,CAA3B,IAAgC,UAAhC;AHNhB,AEgBQ,ACTQ,AJCZ,IGQI,EFhBF,CEgBK,CAAC,MAAJ,CAAW,CFhBH,AEgBR,EAAc,CFhBH,AEgBX,CFhBY,OAAD,EAAkB,KAAlB,KAAoD,gBAAgB,CAAC,OAAD,EAAU,KAAV,EAAiB,KAAjB,CAAvF;ACNA,ACuBQ,IAAA,GDvBR,ACuBW,CDvBX,ACuBY,OAAJ,CDvBR,GAAA,QAAA;ADOA,AEiBK,ACVO,GDHiB,GFJvB,KGOW,MHPA,GAAG,CAAC,CGOT,MHPQ,EAAkB,KAAlB,KAAoD,gBAAgB,CAAC,OAAD,EAAU,KAAV,EAAiB,IAAjB,CAAxF;ACOA,ACWI,ACVY,EDUZ,MCVY,CFDA,ICWD,EAAE,IAAI,GCVS,CAAC,IDUV,CAAA,KDXrB,CAAyC,AECzB,CAA2B,CAA3B,CDUC,CDXjB,ACW+B,EDX0B,AECT,EDUb,QAAA,ACVnB,CDUmB,MAAJ,CAAW,CAAC,CDX3C,ACW+B,EDXqF,ACWtE,CAAC,CAAhB,CAAd,EAAkC,IAAI,QAAA,CAAA,MAAJ,CAAW,CAAX,EAAc,CAAd,CAAlC;AFfjB,ACMI,ACLyB,ACKb,CDLhB,KFDM,GCMK,CAAC,GAAD,EAAM,MDNjB,CAAqB,OCMV,KAAyB,IAAI,CAAC,GAAD,EAAM,oBAAoB,CAAC,cAAD,CAA1B,CAApC;ADFA,ACIH,ACWD,AC/BQ,EHgBJ,IEeE,OFfF,CAAY,IAAZ,EAA0B,AEeV,GAAS,EFfzB,EAAuC;AACnC,AEeJ,EAAA,IAAI,EFfI,AEeF,IFfM,CAAC,CAAL,KAAW,GEeH,EFfQ,CAAC,AEenB,CFfF,CEeyC,CFfjB;AACpB,ACFZ,ACiBQ,ACZA,IAAA,GFLR,CAAA,ECiBc,CAAC,ACZA,CHHG,AGGF,EDYE,CCZH,CHHO,CGGD,EDYE,EFfL,CEeQ,CAAlB,QCZO,CFLf,AEKQ,GFLR,uBDEyD,CCFzD,GDE6D,CAAC,CAA5C,iBAAoD,KAAK,CAAC,CAA1D,OAAN;AACH,AEgBD,ACZH,GA3BD,CDuCI,CCZD,EDYI,CAAC,ECvCR,EDuCI;ADZR,ACaQ,ACXP,IDWO,GAAG,CAAC,CDbI,QCaR,CAAc,CAAd,EAAiB,CDbzB,ACaQ,CDbsB,SAA9B,EAAmD;ADH3C,ACKJ,AFDA,EAAA,MCJQ,CCKD,CAAC,EDLI,CAAC,ACKN,CDLC,CCKK,CFDC,CCJG,ADIF,CAAD,EAAU,ECJF,CAAC,CAAnB,EAAsB,GCKnB,KAAwB;ADJvB,ACKJ,ACWA,ACTR,AJHQ,QAAI,CECC,ACWA,ACTJ,GHPS,CEgBD,AHZA,CGYC,CDXC,CDLG,ADIF,CGYC,AHZA,CGYb,EAAgB,CFhBN,AEgBO,CHZC,CEClB,AFDa,CGYO,AHZA,CGYpB,AHZa,EECU,ACWA,CAAC,AHZA,CAAC,CGYzB,AHZ0B,CIGlC,AJHqB,CGYe,ACTJ,EJHM,EEC9B,EAAkC,CFDC,CIG3C,AJHsC,CAAO,CIGO,AJHd,GIGtC,AJHiD,CAAC,CIGiC,AJHhC,CAA/B,KAAqC,CIGzD,EAAsG,EJHxC,CAAL,CAAO,CAAP,GAAW,KAAK,CIGzE,AJHoE,CAAO,CIGyD,AJH3E,GCJiB,ADIK,ICJD,CAAC,ADIK,CCJlE,ADI6D,CAAO,CAAP,GAAW,KAAK,CAAL,CAAO,CAA7E,CAAZ,ECJ8E,KAAK,CAAC,CAA1E,OAAN;AACH,ACKG,ACWA,ACRR,AJJI,MECI,ACWA,ACRJ,EJJI,CGYG,CAAC,ECRF,AJJE,EECI,CAAC,AEGJ,AJJE,CGYP,ACRR,AJJgB,CGYG,CDXH,EAAM,CFDD,CAAL,CGYS,AHZF,CGYf,AHZQ,EGYY,CAAC,AHZF,CAAC,CAAC,CGYG,AHZhB,GAAiB,CECjB,CAAR,ACWoB,GAAY,AHZF,CGY9B,AHZyB,CAAO,CAAP,GAAW,CAAC,CAAC,CAA/B,KAAqC,KAAK,CAAL,CAAO,CAAP,GAAW,KAAK,CAAL,CAAO,CAAlB,GAAsB,KAAK,CAAL,CAAO,CAAP,GAAW,KAAK,CAAL,CAAO,CAA7E,CAAX;AEEC,ACWG,ACRR,AJJI,MGYI,ACRJ,GDQO,CAAC,CHZD,CIID,CDQF,CAAQ,CCRH,AJJE,CIIf,IDQsB,CHZX,CAAW,GGYd,EAAqB,AHZlB,EAAkB,CGYrB,EAA0B,CAA1B,AHZG,CAAP,CGYiC,IAAI,IAAI,CAAC,EAAT,GAAc,CAA3C,EAA8C,IAAI,IAAI,CAAC,EAAT,GAAc,CAA5D;AFhBJ,ACMH,ACWO,ACRR,AJJC,GEHD,GCeQ,ACRJ,GHTK,AEiBE,CAAC,GFjBR,AEiBI,CAAQ,CCRH,CHTG,EGSA,CDQK,CFjBjB,EEiBoB,CAAhB,ACRR,EDQ2B,CAAC,GAApB,EAAyB,CAAzB,EAA4B,IAAI,CAAC,EAAL,GAAU,CAAtC,EAA0C,KAAK,CAAN,GAAW,IAAI,CAAC,EAAzD,EAA6D,IAA7D;AFhBJ,ACOP,ACUW,ACNR,AJLA,EIKA,IDMQ,GFjBC,AEiBE,CAAC,ACNJ,CAAC,EDMD,CFjBJ,AEiBY,GFjBC,EEiBI,GFjBjB,AEiBoB,CAAhB,EAAmB,CAAC,CCN5B,CAA0B,CDMlB,EAAyB,CAAzB,EAA4B,IAAI,CAAC,ACNzC,EDMoC,ACNG,CAAC,EDMM,CAAtC,CCNmC,CDMO,IAAI,CAAL,GAAU,IAAI,CAAC,EAAxD;AFhBP,AEiBO,ACNJ,IAAA,EDMI,GAAG,CAAC,ACNF,GAAG,CAAC,CAAC,CDMP,CAAW,CAAX,EAAc,CAAd,CCNJ;AFbR,ACoBY,ACNJ,IAAA,EDMI,CDpBZ,CAAA,CCoBe,CAAC,ACNF,GAAG,CAAC,CAAC,CDMP,CAAW,IDpBvB,CEcQ,CDMqB,CDpB7B,ACoBY,EAAoB,CAAC,GAAG,KAAJ,EDpBhC,CCoB4C,CAAhC;AFhBR,AEiBQ,ACNJ,IHXF,AGWE,EDMI,GAAG,CFjBH,AEiBI,CFjBH,EGWI,GDML,ACNQ,CDMI,EFjBpB,CGWI,CDMoB,CAAL,CFjBD,EEiBW,IAAI,CAAC,EAA1B;AFhBJ,ACMR,ACWS,ACNJ,GAJD,MHPS,ACMG,IDNC,CAAC,GAAG,KAAK,CCM1B,CAA+B,EDNV,CAAU,CAAvB,EAA0B,ACMlC,CDNmC,CCMa,GDNT,KAAK,KAAL,CAAW,CAA1C,EAA6C,CAAC,EAA9C,EAAkD;AAC9C,ACOR,AEMA,EAAA,OFNO,CAAC,AEMA,CAAC,CHbK,CCOP,EAAM,CDPK,ACOX,KAAW,GDPA,CAAA,EGalB,CAA0B,GHbZ,CAAW,CAAX,EAAc,IGa5B,CHbiC,CGaM,CAAC,EHbZ,CAAU,CAAxB,AGa6B,CHbnC;AACH,ACOD,ACUA,ACJA,AJTJ,EAAA,EEGI,ACUA,GDVG,ACUA,CDVC,ACUA,ACJA,ODIJ,EDVA,AEMA,CJTY,CISG,AJTF,CEGG,AFHJ,EAAU,KEGtB;ADNH,ACOG,ACUH,ACJO,AJTJ,GGJqB,CDOrB,EEMI,CFND,CAAC,GFHG,KEGP,AFHY,CEGC,AFHN,CAAO,EISI,CAAC,EFNA,AFHZ,CEGa,AFHA,CAAC,CAAC,CAAf,EAAkB,EEGZ,CAAe,AEMxB,AJTG,CEGP,AEM+B,AJTF,CISzB,CFN2B,GEMK,AJTF,CISG,AJTR,CISS,AJTF,CEGC,CAAC,GFHT,CAAa,CISN,AJTO,CAAC,CEGb,AFHF,CEGiB,AEME,AJTzC,CEGP,AFHA,EEGiD,GEM7C,GFNmD,CAAC,KAAP,EAAjD,EAAiE,MAAM,CAAC,MAAP,EAAjE;AACH,ACUD,ACJQ,AJTP,EGaD,CDbA,GESQ,ODIG,EAAG,KCJQ,CAAC,MDIT,KCJN,CAA2B,CAA3B,IAAgC,CAAC,CAAC,OAAF,GAAY,MAA5C;AHjCS,AC4BpB,ACUO,ACJI,MAAA,EDIA,CAAC,GAAG,CCJG,CAAC,EDIA,CCJD,EAAM,EDIT,GAAY,CAApB,QCJW,CAAP;ADKJ,ACJI,AJTR,EAAA,IISQ,CJTH,CAAC,CAAD,EGaM,AHbI,CISD,GDIC,ACJE,CAAC,CAAC,MDIJ,CAAA,ACJP,SDIG,CAAc,IAAI,QAAA,CAAA,MAAJ,CAAW,CAAC,CAAZ,EAAe,CAAC,CAAD,GAAK,CAApB,CAAd,EAAsC,IAAI,QAAA,CAAA,MAAJ,CAAW,CAAX,EAAc,CAAC,GAAG,CAAlB,CAAtC,CAAP;AFfR,ACFA,ACkBK,ACJO,AJTJ,GGUS,GCDL,CFdZ,CAAA,EDEU,CDGK,CISG,GAAG,AJTF,CISG,CAAC,GJTR,CAAU,CELzB,EEcY,CFdZ,CFK8B,CAAL,CAAO,ECHhC,CAA+B,EDGN,CAAa,CAAb,CAAV,ECHf,ADG0C,CEL1C,CDEyD,GDGV,CAAL,CCH1C,ADGiD,ECHuD,GDG9D,CAAa,CAAb,CAA3B,CAAP;ACHgG,AEL3E,ACkBpB,AJTJ,CGTL,KFKwF,SAAgB,uEAAJ,IAAI;ACOxG,AEOK,GARD,MFCK,aAAT,CAAuB,IAAvB,EAAsE,cAAtE,EAAoG;ADLhG,ACMA,AEQA,AJ7Cc,EI6Cd,OFRO,CEQC,CHdC,AGcA,QFRQ,GAAV,EAAuC,CDN9C,CAAwB,CGcxB,CAA0B,KHd1B,EAAgD,EGchD,EAAqC,CAAC,IAAG;AHbrC,ACMA,AEQA,IFRA,GAAG,CAAC,AEQA,EHdE,CAAC,CCMP,EDNU,GGcV,EAAe,EHdE,CAAC,IAAR,CAAa,CAAb,IAAkB,SAAS,GAAG,CAAH,GAAO,CAAC,CAAnC,CAAV;AACA,ACMA,AEQI,AJ/CZ,IEuCQ,EEQI,CFRD,AFvCX,CEuCY,AFvCZ,ECiCc,GDjCd,CCiCkB,EDjClB,CCiCqB,ACMb,CAAc,EEQI,CHdD,AGcE,AJ/C3B,QCiCyB,CAAA,ECMW,AEQxB,CFRyB,AEQE,CAA3B,EHdS,CAAW,CGcY,CAAC,CAAC,IHdP,ACMjB,CDNkB,ACMS,CAAzC,CEQoC,CFRQ,CDNpB,CAAa,AGcW,CHdnC,EAA2B,CAA3B,CAAb,CGcI,MFRsD,CAAC,WAAf,CAA2B,CAAvE;ADLA,ACMA,AEQI,IFRJ,EEQI,CFRD,CAAC,EDNE,GCMN,CAAU,CDNC,GAAG,EGcI,CAAC,CHdD,MCMM,CAAC,CDNP,CAAA,CGcd,CAA2B,CAA3B,EFRJ,CDNc,CAAW,ACMS,AEQE,CAAC,CAAC,KHdN,CAAC,CGcG,GAAY,CHdvB,CAAc,ACMS,CDNlC,ACMmC,EDNP,CAA5B,AGcV,CHdJ,GCMA;ADLA,ACMA,AEQI,AJZZ,IEIQ,EEQI,AJZC,ECFD,ACMA,CAAC,GAAD,CAAJ,AEQW,CAAC,CJZpB,CCFoB,ADEE,CIYH,EHdI,AGcE,UHdQ,CAAC,GGcf,CHdc,AGcrB,EHd4B,KAAP,CAAzB;AACA,ACMA,AEQI,AJRR,EAAA,EEAI,EEQI,CFRD,CDNC,ACMA,KFAR,CAAY,CEAR,AEQa,EHdA,CGcG,EHdA,CDMpB,EIQQ,AJRqB,QCNE,CAAC,EDMhC,EAAgD,CCNjB,EAAQ,KAAR,CAA3B;ACOH,AEQI,AJRD,GENJ,MFMS,OAAL,GAAe,OAAf;ACLA,ACMP,AEQI,AJRG,GICJ,MJDS,ECNE,CAAC,KAAK,CAAC,EDMd,GAAmB,GCNN,CAAN,IAAoB,GDM3B,KCNmC,CAAC,CAAT,GAAa,SAAS,CAAC,CAAlD,EAAqD;AACjD,AGeR,AJTC,EISD,IHfQ,IGeA,CAAC,GHfO,CAAC,CAAT,WGeR,CAA0B,OAA1B,EAAmC,CAAC,IAAG;AHdlC,ACOT,AEQQ,QAAI,CFRH,AEQI,CAAC,MAAF,KAAa,CFRzB,AEQQ,CFRe,CEQK,GFR5B,EAAmC,cAAnC,EAAiE;AAC7D,AEQQ,AJTR,EAAA,OECO,AFDA,GAAA;ACNH,ACQA,AEQC,AJTD,IECA,IAAI,EAAE,CDRC,ADOA,CCPC,ADOA,KCPK,ADOA,CCPC,KCQK,CAAC,AFDb,EAAe,CCPT,CAAN,ACQiB,CAAC,CFDC,ECPE,CCQT,EAAY,CFDT,CAAW,GCPG,CAAC,CAAT,ADOU,GCPG,ICQtB,AFDc,CEA9B,AFA2C,CAAxB,EAA2B,CCPC,CAAC,CAAnD,EAAsD,ADOA,WAAL,CAAiB,CAA5C,CAAf,EAA+D,KAAK,WAApE,EAAiF,IAAI,MAAJ,CAAW,KAAK,WAAL,CAAiB,CAA5B,EAA+B,KAAK,OAAL,CAAa,CAA5C,CAAjF,CAAP;ACNI,ACQJ,AFDH,IECG,EDRI,SAAS,ACQF,CDRG,CAAV,ACQS,IAAI,CAAC,WAAL,CAAiB,SAAjB,CAA2B,cAA3B;ADPZ,ACKE,AEUH,GFVJ,KEUQ,MAAM,GAAG,CAAC,CAAC,MAAF,GAAW,CAAX,GAAe,IAAf,GAAsB,IAAnC;AFNP,AEOO,AJRJ,EAAA,EIQI,IAAI,AJRF,CIQG,EJRH,YIQE,EAAiB,IAAI,QAAA,CAAA,MAAJ,CAAW,CAAC,CAAC,OAAb,EAAsB,CAAC,CAAC,OAAxB,CAAjB,EAAmD,MAAnD,CAAJ;AHfA,AGgBA,AJRA,IIQA,IHhBI,GGgBG,AJRA,CIQC,CHhBC,CAAC,CGgBH,AJRI,EIQE,IJRN,CCRE,ADQS,CCRlB,ADQmB,ECRE,GDQG,GIQjB,CAAP,GJRmB,CAAa,CAAb,GAAiB,KAAK,WAAL,CAAiB,CAAnC,IAAwC,CAAnD,EAAsD,CAAC,KAAK,OAAL,CAAa,CAAb,GAAiB,KAAK,WAAL,CAAiB,CAAnC,IAAwC,CAA9F,CAAP;ACPI,ACUZ,AEMK,AJRA,GICD,MFCK,IDVU,IAAI,KCUvB,CAAuB,GAAvB,EAAsD,IDVnC,CAAoB,ICUvC,EAA+G,EDV5F,EAA8B,SAA9B,CAAP;AACH,ACSsG,AEO9G,KHlBO,CCWoE,KDT7D,ICSgG,uEAAvB,CAAuB;ADRnG,ACQmG,AFA3G,EAAA,IEAuF,KFA9E,CAAC,CCRK,ADQN,EAAU,ECRX,ACQmG,uEAAN,MAAM;ADPtG,ACQL,AESJ,AJTQ,EEAJ,GAAG,CAAC,GESC,EJTM,EISf,CAAc,CFTV,AFAe,GEAC,MFAL,CAAc,EEAzB,CESJ,EAA8C,AJTZ,MISlC,CJT6B,CISiC,AJTpB,GAAb,CAAiB,CIS9C,AJT6B,CAAd,CIS4D,CJTzB,KAAK,WAAL,CAAiB,GAAjB,CAAqB,CAArB,CAAnC,CAAP;ACPH,ACQD,AESA,AJTC,EEAD,AESA,GFTG,CAAC,UESU,CFTd,AESe,GFTG,IESlB,IAA0B,GFT1B,EESA;AFRA,AESA,EFTA,AESA,GFTG,CAAC,IAAJ,CAAS,KESK,CAAC,GFTG,CAAC,OAAV,AEST,CFT2B,CAA3B,CES6B,CFTC,SAAS,CAAC,GESG,CAAC,GFTd,CAAkB,CAAhD,EAAmD,IEStB,CAA2B,IFTI,CAAC,AEShC,CAAiC,IFTX,CEStB,CFT7B,CESqE,CFTC,OESzC,CAAiD,CFTC,CAAC,IESI,CAAC,CFTf,EAAtE,EES8E,CAAa,KAAK,GAAG,CAArB,CAAjD,CAA7B;AHhBA,ACQA,AESH,AJTG,EEAA,AFAA,GEAG,CDRC,ACQA,KFAK,CEAT,AFAU,SCRS,GAAG,EDQb,EAA+B,UCRJ,CAAC,OAAD,CAApC;ACSH,AFAO,WAAO,IAAI,SAAJ,CACH,cAAc,CAAC,SAAf,CAAyB,KAAK,OAA9B,CADG,EAEH,cAAc,CAAC,SAAf,CAAyB,KAAK,WAA9B,CAFG,CAAP;ACRJ,ADYC,SCZM,eAAe,KAAK,IAA3B,EAAiC;AAC7B,ADaJ,UCbU,eAAN;AACA,IAAA,eAAe,GAAG,cAAc,CAAC,eAAD,CAAhC;AACH;AAEJ;;;ADaG,EAAA,QAAQ,CAAC,CAAD,EAAa;AACjB,QAAI,SAAS,GAAI,KAAK,OAAL,CAAa,CAAb,IAAkB,CAAC,CAAC,WAAF,CAAc,CAAjC,IAAwC,CAAC,CAAC,OAAF,CAAU,CAAV,IAAe,KAAK,WAAL,CAAiB,CAAxF;AACA,QAAI,SAAS,GAAI,KAAK,OAAL,CAAa,CAAb,IAAkB,CAAC,CAAC,WAAF,CAAc,CAAjC,IAAwC,CAAC,CAAC,OAAF,CAAU,CAAV,IAAe,KAAK,WAAL,CAAiB,CAAxF;AACA,WAAO,SAAS,IAAI,SAApB;AACH;;AAED,EAAA,KAAK,GAAA;AACD,WAAO,KAAK,WAAL,CAAiB,CAAjB,GAAqB,KAAK,OAAL,CAAa,CAAzC;AACH;;AAED,EAAA,MAAM,GAAA;AACF,WAAO,KAAK,WAAL,CAAiB,CAAjB,GAAqB,KAAK,OAAL,CAAa,CAAzC;AACH;;AA7CiB;;AAAtB,OAAA,CAAA,SAAA,GAAA,SAAA;;AAkDA,MAAa,cAAb,CAA2B;AAKvB,EAAA,WAAA,CAAY,WAAZ,EAAiC,OAAjC,EAAgD;AAC5C,SAAK,WAAL,GAAmB,WAAnB;AACA,SAAK,OAAL,GAAe,OAAf;AACH;;AAED,EAAA,SAAS,CAAC,CAAD,EAAU;AACf,WAAO,CAAC,CAAC,KAAF,CAAQ,KAAK,OAAb,EAAsB,GAAtB,CAA0B,KAAK,WAA/B,CAAP;AACH;;AAZsB;;AAA3B,OAAA,CAAA,cAAA,GAAA,cAAA","file":"main.c39d6dcf.js","sourceRoot":"../src","sourcesContent":["export class Vector {\n\n    x: number;\n    y: number;\n\n    constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n\n    scale(alpha: number): Vector {\n        return new Vector(this.x * alpha, this.y * alpha);\n    }\n\n    add(vector: Vector): Vector {\n        return new Vector(this.x + vector.x, this.y + vector.y);\n    }\n\n    subtract(vector: Vector): Vector {\n        return new Vector(this.x - vector.x, this.y - vector.y);\n    }\n\n    copy(): Vector {\n        return new Vector(this.x, this.y);\n    }\n\n    dot(v: Vector) {\n        return this.x * v.x + this.y * v.y;\n    }\n\n    norm() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    }\n\n    round() {\n        return new Vector(Math.round(this.x), Math.round(this.y));\n    }\n\n}\n\nexport class Basis {\n    v: Vector;\n    w: Vector;\n\n    constructor(v: Vector, w: Vector) {\n        this.v = v;\n        this.w = w;\n    }\n\n    /**\n     * Return coefficients when expressing 2D vector as weighted sum of basis vectors.\n     * From:\n     * https://math.stackexchange.com/questions/148199/equation-for-non-orthogonal-projection-of-a-point-onto-two-vectors-representing\n     * alpha = (z-component of w cross z) / (z-component of w cross v)\n     * beta = (z-component of v cross z) / (z-component of v cross w)\n     * @param z Arbitrary 2D vector\n     */\n    toCoefficients(z: Vector): Vector {\n        let alpha = (this.w.x * z.y - this.w.y * z.x) / (this.w.x * this.v.y - this.w.y * this.v.x);\n        let beta = (this.v.x * z.y - this.v.y * z.x) / (this.v.x * this.w.y - this.v.y * this.w.x);\n        return new Vector(alpha, beta);\n    }\n\n    /**\n     * Return weighted sum of basis vectors \n     * @param z weights / coefficients (often integer)\n     */\n    fromCoefficients(z: Vector): Vector {\n        return this.v.scale(z.x).add(this.w.scale(z.y));\n    }\n\n    scale(t: number): Basis {\n        return new Basis(this.v.scale(t), this.w.scale(t));\n    }\n\n}\n\nexport class Rectangle {\n\n    topLeft: Vector;\n    bottomRight: Vector;\n\n    constructor(topLeft: Vector, bottomRight: Vector) {\n        this.topLeft = topLeft;\n        this.bottomRight = bottomRight;\n    }\n\n    corners(): Array<Vector> {\n        return [this.topLeft, new Vector(this.topLeft.x, this.bottomRight.y), this.bottomRight, new Vector(this.bottomRight.x, this.topLeft.y)];\n    }\n\n    center(): Vector {\n        return new Vector((this.topLeft.x + this.bottomRight.x) / 2, (this.topLeft.y + this.bottomRight.y) / 2);\n    }\n\n    translate(v: Vector): Rectangle {\n        return new Rectangle(this.topLeft.add(v), this.bottomRight.add(v));\n    }\n\n    transform(transformation: Transformation): Rectangle {\n        return new Rectangle(\n            transformation.transform(this.topLeft),\n            transformation.transform(this.bottomRight),\n        ); \n    }\n\n    /**\n     * Return true if another rectangle overlaps with this one.\n     * @param r Another rectangle\n     */\n    overlaps(r: Rectangle): boolean {\n        let overlapsX = (this.topLeft.x <= r.bottomRight.x) && (r.topLeft.x <= this.bottomRight.x);\n        let overlapsY = (this.topLeft.y <= r.bottomRight.y) && (r.topLeft.y <= this.bottomRight.y);\n        return overlapsX && overlapsY;\n    }\n\n    width(): number {\n        return this.bottomRight.x - this.topLeft.x;\n    }\n\n    height(): number {\n        return this.bottomRight.y - this.topLeft.y;\n    }\n\n}\n\n\nexport class Transformation {\n\n    translation: Vector;\n    scaling: number;\n\n    constructor(translation: Vector, scaling: number) {\n        this.translation = translation;\n        this.scaling = scaling;\n    }\n\n    transform(v: Vector) {\n        return v.scale(this.scaling).add(this.translation);\n    }\n\n}\n\nexport interface Unit {\n    draw: (ctx: CanvasRenderingContext2D) => void;\n    boundingBox: Rectangle;\n}\n","import { Vector, Basis, Rectangle } from \"./typing\";\n\n\n/**\n * Return coefficients in basis for all vectors by which to shift boundingBox to cover canvas.\n */\nexport function generateCovering(boundingBox: Rectangle, basis: Basis, canvas: Rectangle): Array<Vector> {\n\n    function translatedBoundingBoxOverlapsCanvas(coefficients: Vector) {\n        return boundingBox.translate(basis.fromCoefficients(coefficients)).overlaps(canvas);\n    }\n\n    const origin = new Vector(0, 0);\n    const leftMost = searchLeft(origin, translatedBoundingBoxOverlapsCanvas);\n    const rightMost = searchRight(origin, translatedBoundingBoxOverlapsCanvas);\n    const centerRange = new HorizontalRange(leftMost, rightMost);\n\n    let coefficients: Array<Vector> = [...centerRange];\n    for (const horizontalRange of createSearchVertical(centerRange, translatedBoundingBoxOverlapsCanvas, true)) {\n        coefficients = coefficients.concat([...horizontalRange]);\n    }\n    for (const horizontalRange of createSearchVertical(centerRange, translatedBoundingBoxOverlapsCanvas, false)) {\n        coefficients = coefficients.concat([...horizontalRange]);\n    }\n\n    return coefficients;\n\n}\n\n\nfunction searchHorizontal(initial: Vector, valid: (v: Vector) => boolean, ascending = true): Vector {\n    let v = initial.copy();\n    const dx = ascending ? 1 : -1;\n    v.x += dx;\n    while (valid(v)) {\n        v.x += dx;\n    }\n    return new Vector(v.x - dx, v.y);\n}\n\n\nconst searchLeft = (initial: Vector, valid: (v: Vector) => boolean) => searchHorizontal(initial, valid, false);\nconst searchRight = (initial: Vector, valid: (v: Vector) => boolean) => searchHorizontal(initial, valid, true);\n\n\nclass HorizontalRange {\n    left: Vector;\n    right: Vector;\n\n    constructor(left: Vector, right: Vector) {\n        if (left.y !== right.y) {\n            throw new Error(`y values should be equal (${left.y} != ${right.y})`);\n        }\n        if (left.x > right.x) {\n            throw new Error(`vectors should be ordered by x coordinate (${left.x} > ${right.x})`);\n        }\n        this.left = left;\n        this.right = right;\n    }\n\n    *[Symbol.iterator]() {\n        for (let x = this.left.x; x <= this.right.x; x++) {\n            yield new Vector(x, this.left.y);\n        }\n    }\n\n}\n\n\nfunction* createSearchVertical(initial: HorizontalRange, valid: (v: Vector) => boolean, ascending = true) {\n\n    function searchVertical(current: HorizontalRange): HorizontalRange | null {\n        const y = current.left.y + (ascending ? 1 : -1);\n        const left = new Vector(current.left.x, y);\n        const right = new Vector(current.right.x, y);\n        let leftMost = searchLeft(left, valid);\n        let rightMost = searchRight(right, valid);\n\n        while (!valid(leftMost) && leftMost.x < rightMost.x) {\n            leftMost.x++;\n        }\n        while (!valid(rightMost) && leftMost.x < rightMost.x) {\n            rightMost.x--;\n        }\n        if (valid(leftMost)) {\n            return new HorizontalRange(leftMost, rightMost);\n        } else {\n            return null;\n        }\n    }\n\n    let horizontalRange = searchVertical(initial);\n    while (horizontalRange !== null) {\n        yield horizontalRange;\n        horizontalRange = searchVertical(horizontalRange);\n    }\n\n}\n","import { Basis, Rectangle, Transformation, Unit } from \"./typing\";\nimport { generateCovering } from \"./covering\";\n\nexport type Drawable = (ctx: CanvasRenderingContext2D, transformation: Transformation) => void;\n\n\n/**\n * Unit repeated across a 2D grid.\n */\nexport function createTiling(unitOriginal: Unit, basisOriginal: Basis, canvas: Rectangle): Drawable {\n\n    return (ctx, transformation) => {\n\n        let unit = transformUnit(unitOriginal, transformation);\n        let basis = basisOriginal.scale(transformation.scaling);\n\n        // Translate unit by vector in span of basis to move bounding box close to canvas center.\n        let difference = canvas.center().subtract(unit.boundingBox.center());\n        const roundedDifference = basis.fromCoefficients(basis.toCoefficients(difference).round());\n        unit = transformUnit(unit, new Transformation(roundedDifference, 1));\n\n        let debug = false;\n        if (debug) {\n            drawRectangle(ctx, unit.boundingBox);\n        }\n\n        for (const coefficients of generateCovering(unit.boundingBox, basis, canvas)) {\n            const t = basis.fromCoefficients(coefficients);\n            transformDraw(unit.draw, new Transformation(t, 1))(ctx);\n        }\n    }\n\n}\n\n\nexport function withFill(draw: Drawable, fillStyle?: string): Drawable {\n\n    return (ctx, transformation) => {\n        ctx.beginPath();\n        draw(ctx, transformation);\n        if (fillStyle) {\n            ctx.fillStyle = fillStyle;\n        }\n        ctx.fill();\n    }\n\n}\n\n\nexport function withModifyTransformation(draw: Drawable, modifyTransformation: (t: Transformation) => Transformation): Drawable {\n\n    return (ctx, transformation) => draw(ctx, modifyTransformation(transformation));\n\n}\n\n\nexport function joinDrawables(drawables: Drawable[]): Drawable {\n\n    return (ctx, transformation) => {\n        for (const drawable of drawables) {\n            drawable(ctx, transformation);\n        }\n    }\n\n}\n\n\nexport function drawBackground(canvas: Rectangle): Drawable {\n\n    return (ctx, _) => {\n        ctx.fillStyle = \"white\";\n        ctx.fillRect(canvas.topLeft.x, canvas.topLeft.y, canvas.width(), canvas.height());\n    }\n}\n\n\nfunction transformDraw(draw: (ctx: CanvasRenderingContext2D) => void, transformation: Transformation) {\n    return function (ctx: CanvasRenderingContext2D) {\n        ctx.save();\n        ctx.translate(transformation.translation.x, transformation.translation.y);\n        ctx.scale(transformation.scaling, transformation.scaling);\n        draw(ctx);\n        ctx.restore();\n    }\n}\n\n\nfunction transformUnit(unit: Unit, transformation: Transformation): Unit {\n    return {\n        draw: transformDraw(unit.draw, transformation),\n        boundingBox: unit.boundingBox.transform(transformation)\n    }\n}\n\n\nfunction drawRectangle(ctx: CanvasRenderingContext2D, rectangle: Rectangle, lineWidth = 5, strokeStyle = \"blue\") {\n    ctx.lineWidth = lineWidth;\n    ctx.strokeStyle = strokeStyle;\n    ctx.rect(rectangle.topLeft.x, rectangle.topLeft.y, rectangle.width(), rectangle.height());\n    ctx.stroke();\n}\n","import { Vector, Basis, Rectangle, Transformation, Unit } from \"./typing\";\nimport { Drawable, createTiling, withFill, withModifyTransformation, joinDrawables, drawBackground } from \"./drawing\";\n\n\nconst sqrt3 = Math.sqrt(3);\n\n\nexport function createLittleBirdPattern(canvas: Rectangle): Drawable {\n\n    const colours: { [key: string]: string } = {\n        \"black\": \"black\",\n        \"orange\": \"rgb(176, 93, 37)\",\n        \"green\": \"rgb(35, 98, 45)\",\n        \"blue\": \"rgb(81, 122, 184)\",\n    }\n\n    const colour_order = [\"black\", \"orange\", \"green\", \"blue\"];\n\n    const starTilingReference = createTiling(littleBirdStar, new Basis(new Vector(0, 12), new Vector(2 * sqrt3, 0)), canvas);\n    const wingTilingReference = createTiling(littleBirdWing, new Basis(new Vector(-sqrt3, 3), new Vector(8 * sqrt3, 0)), canvas);\n\n    let tilings: Drawable[] = [];\n\n    for (let i = 0; i < 4; i++) {\n        let starTiling = withFill(starTilingReference, colours[colour_order[i]]);\n        starTiling = withModifyTransformation(\n            starTiling,\n            (t) => new Transformation(\n                new Vector(t.translation.x + i * sqrt3 * t.scaling, t.translation.y + 3 * i * t.scaling), t.scaling,\n            )\n        );\n        tilings.push(starTiling);\n\n        let wingTiling = withFill(wingTilingReference, colours[colour_order[i]]);\n        wingTiling = withModifyTransformation(\n            wingTiling,\n            (t) => new Transformation(new Vector(t.translation.x + i * 2 * sqrt3 * t.scaling, t.translation.y), t.scaling)\n        );\n        tilings.push(wingTiling);\n    }\n\n    return joinDrawables([drawBackground(canvas), ...tilings]);\n\n}\n\n\nconst littleBirdStar: Unit = {\n    draw: function (ctx: CanvasRenderingContext2D) {\n        let r = sqrt3 - 1;\n\n        ctx.moveTo(r, 0);\n        ctx.save();\n        for (let i = 0; i < 6; i++) {\n            ctx.lineTo(r, 0);\n            ctx.lineTo(0.5 * r, 0.25 * r);\n            ctx.rotate(Math.PI / 3);\n        }\n        ctx.lineTo(r, 0);\n        ctx.restore();\n    },\n    boundingBox: new Rectangle(new Vector(-1, -1), new Vector(1, 1))\n}\n\n\nconst littleBirdWing: Unit = {\n    draw: function (ctx: CanvasRenderingContext2D) {\n        const r = sqrt3 - 1;\n\n        ctx.save();\n        ctx.translate(0, 2);\n        for (let i = 0; i < 3; i++) {\n            ctx.moveTo(0.5 * r, r * sqrt3 / 2);\n            ctx.arc(0.5 * sqrt3, 1.5, 1, 4 * Math.PI / 3, 3 * Math.PI / 2);\n            ctx.arc(sqrt3 / 2, -0.5, 1, Math.PI / 2, (11 / 6) * Math.PI, true);\n            ctx.arc(sqrt3 / 2, -1.5, 1, Math.PI / 6, (2 / 3) * Math.PI);\n            ctx.lineTo(r, 0);\n            ctx.lineTo(0.5 * r, r * sqrt3 / 2);\n            ctx.rotate((2 / 3) * Math.PI);\n        }\n\n        ctx.restore();\n    },\n    boundingBox: (function () {\n        let r = 3 * sqrt3 / 2;\n        return new Rectangle(new Vector(-r, -r + 2), new Vector(r, r + 2));\n    })()\n}\n","import { Vector, Rectangle, Transformation } from \"./typing\";\nimport { createLittleBirdPattern } from \"./littlebird\";\nimport { Drawable } from \"./drawing\";\n\nconst canvas = document.querySelector('canvas');\n\nif (canvas != null) {\n    const ctx = canvas.getContext('2d');\n    \n    if (ctx != null) {\n        canvas.width = window.innerWidth;\n        canvas.height = window.innerHeight;\n\n        const canvasRectangle = new Rectangle(new Vector(0, 0), new Vector(canvas.width, canvas.height));\n        let pattern = createLittleBirdPattern(canvasRectangle);\n        let transformation = new Transformation(new Vector(600, 400), 40);\n\n        pattern(ctx, transformation);\n\n        addEventListenersKeyboard(document, ctx, pattern, transformation, canvasRectangle.center());\n        addEventListenersMouse(document, ctx, pattern, transformation);\n    }\n}\n\n\nfunction addEventListenersKeyboard(\n    document: Document, ctx: CanvasRenderingContext2D, pattern: Drawable, transformation: Transformation, canvasCenter: Vector\n) {\n\n    document.addEventListener('keydown', (event) => {\n\n        let shiftSpeed = 10\n\n        switch (event.code) {\n            case 'Minus':\n                zoom(transformation, canvasCenter, 0.98)\n                break;\n            case 'Equal':\n                zoom(transformation, canvasCenter, 1.02)\n                break;\n            case 'ArrowRight':\n                transformation.translation.x += shiftSpeed;\n                break;\n            case 'ArrowLeft':\n                transformation.translation.x -= shiftSpeed;\n                break;\n            case 'ArrowUp':\n                transformation.translation.y -= shiftSpeed;\n                break;\n            case 'ArrowDown':\n                transformation.translation.y += shiftSpeed;\n                break;\n        }\n\n        pattern(ctx, transformation);\n\n    }, false);\n\n}\n\n\nfunction addEventListenersMouse(document: Document, ctx: CanvasRenderingContext2D, pattern: Drawable, transformation: Transformation) {\n\n    let mouseX = 0;\n    let mouseY = 0;\n    let mouseDown = false;\n\n\n    document.addEventListener('mousedown', e => {\n        mouseX = e.offsetX;\n        mouseY = e.offsetY;\n        mouseDown = true;\n    });\n\n\n    document.addEventListener('mousemove', e => {\n        if (mouseDown) {\n            transformation.translation.x += e.offsetX - mouseX;\n            transformation.translation.y += e.offsetY - mouseY;\n            pattern(ctx, transformation);\n            mouseX = e.offsetX;\n            mouseY = e.offsetY;\n        }\n    });\n\n    document.addEventListener('mouseup', e => {\n        if (mouseDown) {\n            transformation.translation.x += e.offsetX - mouseX;\n            transformation.translation.y += e.offsetY - mouseY;\n            pattern(ctx, transformation);\n            mouseDown = false;\n        }\n    });\n\n    document.addEventListener('wheel', e => {\n        if (e.deltaY === 0) {\n            return;\n        }\n        let factor = e.deltaY > 0 ? 0.98 : 1.02;\n        zoom(transformation, new Vector(e.offsetX, e.offsetY), factor)\n        pattern(ctx, transformation);\n    });\n}\n\n\nfunction zoom(transformation: Transformation, center: Vector, ratio: number) {\n    transformation.scaling *= ratio;\n    transformation.translation = transformation.translation.scale(ratio).subtract(center.scale(ratio - 1));\n}"]}